
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Coloco - Trouve ta colocation idéale</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Maps API -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <style>
        /* Variables CSS */
        :root {
            --primary: #4a6fa5;
            --primary-dark: #385d8a;
            --secondary: #ff7e5f;
            --light: #f8f9fa;
            --dark: #343a40;
            --gray: #6c757d;
            --light-gray: #e9ecef;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            --border-radius: 12px;
            --transition: all 0.3s ease;
        }
        
        /* Mode sombre */
        .dark-mode {
            --primary: #5d8cc9;
            --primary-dark: #4a6fa5;
            --secondary: #ff9c8a;
            --light: #2d3748;
            --dark: #f8f9fa;
            --gray: #a0aec0;
            --light-gray: #4a5568;
            --success: #38a169;
            --warning: #d69e2e;
            --danger: #e53e3e;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        /* Reset et styles de base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: var(--dark);
            overflow-x: hidden;
            height: 100vh;
            transition: var(--transition);
        }
        
        body.dark-mode {
            background-color: #1a202c;
        }
        
        /* Application container */
        .app-container {
            max-width: 100%;
            height: 100vh;
            margin: 0 auto;
            position: relative;
            background-color: white;
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: var(--transition);
        }
        
        .dark-mode .app-container {
            background-color: #2d3748;
        }
        
        /* En-tête */
        .app-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
            position: relative;
            transition: var(--transition);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo i {
            font-size: 1.8rem;
        }
        
        .logo h1 {
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .header-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .theme-toggle {
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }
        
        .theme-toggle:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .auth-buttons {
            display: flex;
            gap: 10px;
        }
        
        .btn-auth {
            padding: 8px 15px;
            border-radius: 20px;
            border: 2px solid white;
            background: transparent;
            color: white;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .btn-auth:hover {
            background-color: white;
            color: var(--primary);
        }
        
        .btn-auth.primary {
            background-color: white;
            color: var(--primary);
            border: none;
        }
        
        .btn-auth.primary:hover {
            background-color: rgba(255, 255, 255, 0.9);
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .user-avatar:hover {
            transform: scale(1.05);
        }
        
        /* Notification toast */
        .toast-container {
            position: fixed;
            top: 80px;
            right: 20px;
            z-index: 10000;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .toast {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 15px 20px;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 15px;
            min-width: 300px;
            transform: translateX(400px);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        
        .toast.show {
            transform: translateX(0);
            opacity: 1;
        }
        
        .toast.success {
            border-left: 4px solid var(--success);
        }
        
        .toast.error {
            border-left: 4px solid var(--danger);
        }
        
        .toast.warning {
            border-left: 4px solid var(--warning);
        }
        
        .toast.info {
            border-left: 4px solid var(--primary);
        }
        
        .toast-icon {
            font-size: 1.5rem;
        }
        
        .toast.success .toast-icon {
            color: var(--success);
        }
        
        .toast.error .toast-icon {
            color: var(--danger);
        }
        
        .toast.warning .toast-icon {
            color: var(--warning);
        }
        
        .toast.info .toast-icon {
            color: var(--primary);
        }
        
        .toast-content {
            flex: 1;
        }
        
        .toast-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .toast-message {
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        .toast-close {
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
            font-size: 1.2rem;
            padding: 5px;
        }
        
        /* Overlay et modal d'authentification */
        .auth-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }
        
        .auth-overlay.active {
            display: flex;
            animation: fadeIn 0.3s;
        }
        
        .auth-container {
            background-color: var(--light);
            border-radius: var(--border-radius);
            width: 100%;
            max-width: 450px;
            overflow: hidden;
            box-shadow: var(--shadow);
            position: relative;
            transition: var(--transition);
        }
        
        .dark-mode .auth-container {
            background-color: #4a5568;
        }
        
        .auth-header {
            padding: 25px 30px 15px;
            text-align: center;
        }
        
        .auth-header h2 {
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .auth-header p {
            color: var(--gray);
            font-size: 0.95rem;
        }
        
        .auth-tabs {
            display: flex;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .auth-tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: none;
            border: none;
            color: var(--gray);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            border-bottom: 3px solid transparent;
        }
        
        .auth-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }
        
        .auth-content {
            padding: 30px;
        }
        
        .auth-form {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .auth-form.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--dark);
            font-weight: 500;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--light-gray);
            border-radius: 8px;
            font-size: 1rem;
            background-color: white;
            color: var(--dark);
            transition: var(--transition);
        }
        
        .dark-mode .form-group input,
        .dark-mode .form-group select {
            background-color: #2d3748;
            border-color: #718096;
            color: var(--dark);
        }
        
        .form-group input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.2);
        }
        
        .form-group small {
            display: block;
            margin-top: 5px;
            color: var(--gray);
            font-size: 0.85rem;
        }
        
        .password-strength {
            height: 5px;
            background-color: var(--light-gray);
            border-radius: 5px;
            margin-top: 8px;
            overflow: hidden;
        }
        
        .password-strength-bar {
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 5px;
        }
        
        .password-strength-weak {
            background-color: var(--danger);
            width: 33%;
        }
        
        .password-strength-medium {
            background-color: var(--warning);
            width: 66%;
        }
        
        .password-strength-strong {
            background-color: var(--success);
            width: 100%;
        }
        
        .verification-code {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .verification-code input {
            width: 50px;
            height: 60px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
            border: 2px solid var(--light-gray);
            border-radius: 8px;
            transition: var(--transition);
        }
        
        .verification-code input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.2);
        }
        
        .code-input-filled {
            border-color: var(--success) !important;
        }
        
        .resend-code {
            text-align: center;
            margin-top: 15px;
        }
        
        .resend-code button {
            background: none;
            border: none;
            color: var(--primary);
            cursor: pointer;
            font-size: 0.9rem;
            text-decoration: underline;
        }
        
        .resend-code button:hover {
            color: var(--primary-dark);
        }
        
        .resend-code button:disabled {
            color: var(--gray);
            cursor: not-allowed;
            text-decoration: none;
        }
        
        .terms-checkbox {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .terms-checkbox input {
            margin-top: 4px;
        }
        
        .terms-checkbox label {
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        .terms-checkbox a {
            color: var(--primary);
            text-decoration: none;
        }
        
        .terms-checkbox a:hover {
            text-decoration: underline;
        }
        
        .auth-footer {
            text-align: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--light-gray);
        }
        
        .auth-footer a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }
        
        .auth-footer a:hover {
            text-decoration: underline;
        }
        
        .auth-close {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--light-gray);
            border: none;
            font-size: 1.2rem;
            color: var(--gray);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }
        
        .auth-close:hover {
            background-color: var(--danger);
            color: white;
        }
        
        /* Badge de vérification */
        .verified-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            background-color: rgba(40, 167, 69, 0.1);
            color: var(--success);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 10px;
        }
        
        .verified-badge i {
            font-size: 0.9rem;
        }
        
        /* Navigation */
        .app-nav {
            display: flex;
            background-color: var(--light);
            border-bottom: 1px solid var(--light-gray);
            overflow-x: auto;
            white-space: nowrap;
            padding: 0 10px;
            transition: var(--transition);
        }
        
        .dark-mode .app-nav {
            background-color: #4a5568;
        }
        
        .nav-item {
            padding: 15px 20px;
            text-align: center;
            color: var(--gray);
            font-weight: 500;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            cursor: pointer;
            flex: 1;
            min-width: 120px;
        }
        
        .nav-item:hover {
            color: var(--primary);
        }
        
        .nav-item.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }
        
        .nav-item i {
            margin-right: 8px;
        }
        
        /* Contenu principal */
        .app-content {
            height: calc(100vh - 140px);
            overflow-y: auto;
            padding-bottom: 20px;
            transition: var(--transition);
        }
        
        /* Section active */
        .section {
            display: none;
            padding: 20px;
            animation: fadeIn 0.3s;
        }
        
        .section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Section d'accueil */
        .hero {
            text-align: center;
            padding: 30px 20px 40px;
            background: linear-gradient(135deg, #f5f7fa, #e4edf5);
            border-radius: 0 0 30px 30px;
            margin-bottom: 20px;
            transition: var(--transition);
        }
        
        .dark-mode .hero {
            background: linear-gradient(135deg, #4a5568, #2d3748);
        }
        
        .hero h2 {
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 1.8rem;
        }
        
        .hero p {
            color: var(--gray);
            margin-bottom: 25px;
            line-height: 1.5;
        }
        
        /* Boutons */
        .btn {
            display: inline-block;
            padding: 12px 25px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            box-shadow: 0 4px 8px rgba(74, 111, 165, 0.2);
        }
        
        .btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(74, 111, 165, 0.3);
        }
        
        .btn-secondary {
            background-color: var(--secondary);
        }
        
        .btn-secondary:hover {
            background-color: #ff6b4a;
        }
        
        .btn-small {
            padding: 8px 15px;
            font-size: 0.9rem;
        }
        
        .btn-full {
            width: 100%;
        }
        
        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
            box-shadow: none;
        }
        
        .btn-outline:hover {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-success {
            background-color: var(--success);
        }
        
        .btn-success:hover {
            background-color: #218838;
        }
        
        /* Annonces vérifiées */
        .listing-verified {
            position: absolute;
            top: 15px;
            left: 60px;
            background-color: rgba(40, 167, 69, 0.9);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
            z-index: 1;
        }
        
        /* Modal pour les détails */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .modal.active {
            display: flex;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .auth-container {
                max-width: 95%;
            }
            
            .verification-code input {
                width: 40px;
                height: 50px;
                font-size: 1.2rem;
            }
            
            .header-controls {
                gap: 8px;
            }
            
            .btn-auth {
                padding: 6px 12px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <!-- Toast container -->
    <div class="toast-container"></div>
    
    <!-- Overlay d'authentification -->
    <div class="auth-overlay" id="auth-overlay">
        <div class="auth-container">
            <button class="auth-close" id="close-auth">&times;</button>
            
            <div class="auth-header">
                <h2>Bienvenue sur Coloco</h2>
                <p>Rejoignez notre communauté de colocation</p>
            </div>
            
            <div class="auth-tabs">
                <button class="auth-tab active" data-tab="login">Connexion</button>
                <button class="auth-tab" data-tab="register">Inscription</button>
            </div>
            
            <!-- Formulaire de connexion -->
            <div class="auth-content">
                <form id="login-form" class="auth-form active">
                    <div class="form-group">
                        <label for="login-email">Adresse email</label>
                        <input type="email" id="login-email" placeholder="votre@email.com" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="login-password">Mot de passe</label>
                        <input type="password" id="login-password" placeholder="Votre mot de passe" required>
                        <small><a href="#" id="forgot-password">Mot de passe oublié ?</a></small>
                    </div>
                    
                    <button type="submit" class="btn btn-full">Se connecter</button>
                    
                    <div class="auth-footer">
                        <p>Pas encore de compte ? <a href="#" id="switch-to-register">S'inscrire</a></p>
                    </div>
                </form>
                
                <!-- Formulaire d'inscription -->
                <form id="register-form" class="auth-form">
                    <div class="form-group">
                        <label for="register-name">Nom complet</label>
                        <input type="text" id="register-name" placeholder="Votre nom et prénom" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-email">Adresse email</label>
                        <input type="email" id="register-email" placeholder="votre@email.com" required>
                        <small>Nous vous enverrons un code de vérification</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-phone">Téléphone</label>
                        <input type="tel" id="register-phone" placeholder="+213 XX XX XX XX" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-password">Mot de passe</label>
                        <input type="password" id="register-password" placeholder="Créez un mot de passe sécurisé" required>
                        <div class="password-strength">
                            <div class="password-strength-bar" id="password-strength-bar"></div>
                        </div>
                        <small>Minimum 8 caractères avec chiffres et lettres</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-confirm">Confirmer le mot de passe</label>
                        <input type="password" id="register-confirm" placeholder="Retapez votre mot de passe" required>
                    </div>
                    
                    <div class="terms-checkbox">
                        <input type="checkbox" id="accept-terms" required>
                        <label for="accept-terms">
                            J'accepte les <a href="#">conditions d'utilisation</a> et la <a href="#">politique de confidentialité</a>
                        </label>
                    </div>
                    
                    <button type="submit" class="btn btn-full btn-success">S'inscrire</button>
                    
                    <div class="auth-footer">
                        <p>Déjà un compte ? <a href="#" id="switch-to-login">Se connecter</a></p>
                    </div>
                </form>
                
                <!-- Formulaire de vérification -->
                <form id="verify-form" class="auth-form">
                    <div class="form-group">
                        <h3 style="text-align: center; color: var(--primary); margin-bottom: 20px;">Vérification par email</h3>
                        <p style="text-align: center; color: var(--gray); margin-bottom: 20px;">
                            Nous avons envoyé un code à 6 chiffres à l'adresse :<br>
                            <strong id="verification-email"></strong>
                        </p>
                        
                        <div class="verification-code">
                            <input type="text" maxlength="1" data-index="0" class="code-input">
                            <input type="text" maxlength="1" data-index="1" class="code-input">
                            <input type="text" maxlength="1" data-index="2" class="code-input">
                            <input type="text" maxlength="1" data-index="3" class="code-input">
                            <input type="text" maxlength="1" data-index="4" class="code-input">
                            <input type="text" maxlength="1" data-index="5" class="code-input">
                        </div>
                        
                        <div class="resend-code">
                            <p style="color: var(--gray); margin-bottom: 10px;">Vous n'avez pas reçu le code ?</p>
                            <button type="button" id="resend-code-btn">Renvoyer le code <span id="countdown">(60s)</span></button>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-full btn-success">Vérifier mon compte</button>
                    
                    <div class="auth-footer">
                        <button type="button" class="btn btn-outline btn-full" id="change-email">Changer d'email</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Modal pour les détails de l'annonce -->
    <div class="modal" id="listing-modal">
        <div class="modal-content" style="background-color: var(--light); border-radius: var(--border-radius); width: 100%; max-width: 500px; max-height: 90vh; overflow-y: auto; position: relative; transition: var(--transition);">
            <button class="auth-close" id="close-modal">&times;</button>
            <div class="listing-card" style="box-shadow: none; margin: 0;">
                <div class="listing-image" style="height: 250px; border-radius: var(--border-radius) var(--border-radius) 0 0; position: relative;">
                    <div class="listing-price">35 000 DA</div>
                    <div class="favorite-icon active">
                        <i class="fas fa-heart"></i>
                    </div>
                    <div class="listing-verified">
                        <i class="fas fa-check-circle"></i> Vérifiée
                    </div>
                </div>
                <div class="listing-details" style="padding: 20px;">
                    <h3 class="listing-title">Coloc spacieuse à Hydra</h3>
                    <div class="listing-location">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>Hydra, Alger</span>
                        <span class="verified-badge">
                            <i class="fas fa-check-circle"></i> Propriétaire vérifié
                        </span>
                    </div>
                    <p>Chambre disponible dans un appartement de 4 chambres avec terrasse et vue mer. L'appartement est entièrement meublé et équipé (climatisation, WiFi, machine à laver). Idéal pour étudiant ou jeune professionnel.</p>
                    <div style="display: flex; gap: 10px; margin-top: 25px;">
                        <button class="btn" style="flex: 1; padding: 12px;">Contacter</button>
                        <button class="btn btn-secondary" style="flex: 1; padding: 12px;">Visiter</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="app-container">
        <!-- En-tête de l'application -->
        <header class="app-header">
            <div class="logo">
                <i class="fas fa-home"></i>
                <h1>Coloco</h1>
            </div>
            <div class="header-controls">
                <button class="theme-toggle" id="theme-toggle" aria-label="Changer de thème">
                    <i class="fas fa-moon"></i>
                </button>
                
                <!-- Afficher les boutons de connexion ou l'avatar selon l'état -->
                <div id="auth-buttons" class="auth-buttons">
                    <button class="btn-auth" id="login-btn">Connexion</button>
                    <button class="btn-auth primary" id="register-btn">Inscription</button>
                </div>
                
                <div id="user-menu" style="display: none;">
                    <div class="user-avatar" id="user-profile-btn">
                        <span>YA</span>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- Navigation -->
        <nav class="app-nav">
            <div class="nav-item active" data-section="accueil">
                <i class="fas fa-home"></i> Accueil
            </div>
            <div class="nav-item" data-section="recherche">
                <i class="fas fa-search"></i> Recherche
            </div>
            <div class="nav-item" data-section="carte">
                <i class="fas fa-map-marker-alt"></i> Carte
            </div>
            <div class="nav-item" data-section="favoris">
                <i class="fas fa-heart"></i> Favoris
            </div>
            <div class="nav-item" data-section="chat">
                <i class="fas fa-comments"></i> Messages
            </div>
            <div class="nav-item" data-section="profil">
                <i class="fas fa-user"></i> Profil
            </div>
        </nav>
        
        <!-- Contenu principal -->
        <main class="app-content">
            <!-- Section d'accueil -->
            <section id="accueil" class="section active">
                <div class="hero">
                    <h2>Trouve ta colocation idéale</h2>
                    <p>Que tu sois étudiant ou jeune professionnel, Coloco te simplifie la recherche de logement partagé partout en Algérie</p>
                    <button class="btn btn-secondary" id="start-search">Commencer la recherche</button>
                </div>
                
                <div class="filters-container" style="background-color: var(--light); border-radius: var(--border-radius); padding: 20px; box-shadow: var(--shadow); margin-bottom: 20px; transition: var(--transition);">
                    <div class="filters-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h3 style="color: var(--primary);">Filtres rapides</h3>
                        <span class="filter-count">4 filtres</span>
                    </div>
                    
                    <div class="filter-group">
                        <label>Localisation</label>
                        <input type="text" placeholder="Alger, Oran, Constantine..." value="Alger" id="location-input">
                    </div>
                    
                    <div class="filter-group">
                        <label>Loyer maximum</label>
                        <input type="range" min="10000" max="100000" value="40000" step="5000" id="rent-slider">
                        <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                            <span>10 000 DA</span>
                            <span id="rent-value">40 000 DA</span>
                            <span>100 000 DA</span>
                        </div>
                    </div>
                    
                    <div class="filter-group">
                        <label>Disponibilité</label>
                        <input type="date" value="2023-10-01">
                    </div>
                    
                    <div class="filter-group">
                        <label>Équipements</label>
                        <div class="filter-options" style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px;">
                            <span class="filter-option active">Meublé</span>
                            <span class="filter-option">WiFi</span>
                            <span class="filter-option">Climatisation</span>
                            <span class="filter-option">Parking</span>
                        </div>
                    </div>
                    
                    <button class="btn btn-full" id="apply-filters">Appliquer les filtres</button>
                </div>
                
                <div class="listings-container">
                    <h3 style="margin-bottom: 15px; color: var(--primary);">Annonces vérifiées récentes</h3>
                    
                    <!-- Annonce 1 -->
                    <div class="listing-card" data-listing-id="1" style="background-color: var(--light); border-radius: var(--border-radius); overflow: hidden; box-shadow: var(--shadow); margin-bottom: 20px; transition: var(--transition); cursor: pointer; position: relative;">
                        <div class="listing-image" style="height: 200px; background-color: var(--light-gray); background-size: cover; background-position: center; position: relative; background-image: url('https://images.unsplash.com/photo-1555854877-bab0e564b8d5?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80');">
                            <div class="listing-price" style="position: absolute; top: 15px; right: 15px; background-color: var(--secondary); color: white; padding: 8px 15px; border-radius: 20px; font-weight: bold; font-size: 1.1rem;">35 000 DA</div>
                            <div class="favorite-icon active" style="position: absolute; top: 15px; left: 15px; color: white; background-color: rgba(0, 0, 0, 0.3); width: 35px; height: 35px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; cursor: pointer; z-index: 2;">
                                <i class="fas fa-heart"></i>
                            </div>
                            <div class="listing-verified" style="position: absolute; top: 15px; left: 60px; background-color: rgba(40, 167, 69, 0.9); color: white; padding: 5px 10px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; display: flex; align-items: center; gap: 5px; z-index: 1;">
                                <i class="fas fa-check-circle"></i> Vérifiée
                            </div>
                        </div>
                        <div class="listing-details" style="padding: 20px;">
                            <h3 class="listing-title" style="font-size: 1.2rem; margin-bottom: 10px; color: var(--primary);">Coloc spacieuse à Hydra</h3>
                            <div class="listing-location" style="color: var(--gray); margin-bottom: 10px; display: flex; align-items: center; gap: 5px;">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>Hydra, Alger</span>
                                <span class="verified-badge" style="display: inline-flex; align-items: center; gap: 5px; background-color: rgba(40, 167, 69, 0.1); color: var(--success); padding: 5px 10px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; margin-left: 10px;">
                                    <i class="fas fa-check-circle"></i> Propriétaire vérifié
                                </span>
                            </div>
                            <p>Chambre disponible dans un appartement de 4 chambres avec terrasse et vue mer. Idéal pour étudiant ou jeune professionnel.</p>
                            <div style="display: flex; gap: 10px; margin-top: 15px;">
                                <button class="btn" style="flex: 1; padding: 10px;">Contacter</button>
                                <button class="btn btn-secondary" style="flex: 1; padding: 10px;">Visiter</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Annonce 2 -->
                    <div class="listing-card" data-listing-id="2" style="background-color: var(--light); border-radius: var(--border-radius); overflow: hidden; box-shadow: var(--shadow); margin-bottom: 20px; transition: var(--transition); cursor: pointer; position: relative;">
                        <div class="listing-image" style="height: 200px; background-color: var(--light-gray); background-size: cover; background-position: center; position: relative; background-image: url('https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80');">
                            <div class="listing-price" style="position: absolute; top: 15px; right: 15px; background-color: var(--secondary); color: white; padding: 8px 15px; border-radius: 20px; font-weight: bold; font-size: 1.1rem;">28 000 DA</div>
                            <div class="favorite-icon" style="position: absolute; top: 15px; left: 15px; color: white; background-color: rgba(0, 0, 0, 0.3); width: 35px; height: 35px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; cursor: pointer; z-index: 2;">
                                <i class="far fa-heart"></i>
                            </div>
                            <div class="listing-verified" style="position: absolute; top: 15px; left: 60px; background-color: rgba(40, 167, 69, 0.9); color: white; padding: 5px 10px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; display: flex; align-items: center; gap: 5px; z-index: 1;">
                                <i class="fas fa-check-circle"></i> Vérifiée
                            </div>
                        </div>
                        <div class="listing-details" style="padding: 20px;">
                            <h3 class="listing-title" style="font-size: 1.2rem; margin-bottom: 10px; color: var(--primary);">Appartement moderne à Bab Ezzouar</h3>
                            <div class="listing-location" style="color: var(--gray); margin-bottom: 10px; display: flex; align-items: center; gap: 5px;">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>Bab Ezzouar, Alger</span>
                                <span class="verified-badge" style="display: inline-flex; align-items: center; gap: 5px; background-color: rgba(40, 167, 69, 0.1); color: var(--success); padding: 5px 10px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; margin-left: 10px;">
                                    <i class="fas fa-check-circle"></i> Propriétaire vérifié
                                </span>
                            </div>
                            <p>Colocation dans un appartement neuf à proximité de l'université. Charges incluses. Environnement calme.</p>
                            <div style="display: flex; gap: 10px; margin-top: 15px;">
                                <button class="btn" style="flex: 1; padding: 10px;">Contacter</button>
                                <button class="btn btn-secondary" style="flex: 1; padding: 10px;">Visiter</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Section Recherche -->
            <section id="recherche" class="section">
                <div class="search-bar" style="padding: 15px 20px; background-color: var(--light); display: flex; gap: 10px; box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05); margin-bottom: 20px; transition: var(--transition);">
                    <input type="text" class="search-input" placeholder="Rechercher une colocation..." id="search-input" style="flex: 1; padding: 12px 15px; border: 1px solid var(--light-gray); border-radius: 8px; font-size: 1rem; background-color: white; color: var(--dark);">
                    <button class="btn" id="search-btn">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
                
                <div class="filters-container" style="background-color: var(--light); border-radius: var(--border-radius); padding: 25px; box-shadow: var(--shadow); margin-bottom: 20px; transition: var(--transition);">
                    <div class="filters-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h3 style="color: var(--primary);">Filtres avancés</h3>
                        <button class="btn" style="padding: 8px 15px; font-size: 0.9rem;" id="reset-filters">Réinitialiser</button>
                    </div>
                    
                    <div class="form-group">
                        <label>Type de logement</label>
                        <div class="filter-options" style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px;">
                            <span class="filter-option active">Appartement</span>
                            <span class="filter-option">Maison</span>
                            <span class="filter-option">Studio</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Annonces vérifiées uniquement</label>
                        <div style="display: flex; align-items: center; gap: 10px; margin-top: 10px;">
                            <input type="checkbox" id="verified-only" checked>
                            <label for="verified-only" style="margin-bottom: 0;">Afficher uniquement les annonces vérifiées</label>
                        </div>
                    </div>
                    
                    <button class="btn btn-full" id="show-results">Afficher 12 résultats</button>
                </div>
            </section>
            
            <!-- Section Publication (cachée dans la navigation mais accessible via bouton) -->
            <section id="publication" class="section">
                <div class="publish-form" style="background-color: var(--light); border-radius: var(--border-radius); padding: 25px; box-shadow: var(--shadow); margin-bottom: 20px; transition: var(--transition);">
                    <h3 style="margin-bottom: 20px; color: var(--primary);">Publier une annonce</h3>
                    
                    <div style="background-color: rgba(var(--warning-rgb), 0.1); border-left: 4px solid var(--warning); padding: 15px; margin-bottom: 20px; border-radius: 4px;">
                        <p style="color: var(--dark); margin-bottom: 5px; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-exclamation-triangle" style="color: var(--warning);"></i>
                            <strong>Votre compte doit être vérifié pour publier une annonce</strong>
                        </p>
                        <p style="color: var(--gray); font-size: 0.9rem;">
                            Pour lutter contre les fausses annonces, nous vérifions tous les comptes avant publication.
                        </p>
                    </div>
                    
                    <div class="form-group">
                        <label>Titre de l'annonce *</label>
                        <input type="text" placeholder="Ex: Colocation spacieuse à Hydra" id="ad-title" required>
                    </div>
                    
                    <button class="btn btn-full btn-secondary" id="publish-ad" disabled>Publier l'annonce (Compte non vérifié)</button>
                    <p style="text-align: center; margin-top: 15px; color: var(--gray); font-size: 0.9rem;">
                        <i class="fas fa-shield-alt"></i> La publication est réservée aux comptes vérifiés
                    </p>
                </div>
            </section>
        </main>
        
        <!-- Bouton flottant pour publier -->
        <div style="position: fixed; bottom: 20px; right: 20px; z-index: 100;">
            <button class="btn btn-secondary" id="publish-btn" style="width: 60px; height: 60px; border-radius: 50%; font-size: 1.5rem; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);">
                <i class="fas fa-plus"></i>
            </button>
        </div>
    </div>
    
    <script>
        // Variables globales
        let currentUser = JSON.parse(localStorage.getItem('coloco_current_user')) || null;
        let verificationCode = null;
        let verificationTimer = null;
        let countdownSeconds = 60;
        let isDarkMode = localStorage.getItem('darkMode') === 'true';
        
        // Initialisation au chargement
        document.addEventListener('DOMContentLoaded', function() {
            // Initialiser le mode sombre
            if (isDarkMode) {
                document.body.classList.add('dark-mode');
                document.getElementById('theme-toggle').innerHTML = '<i class="fas fa-sun"></i>';
            }
            
            // Afficher l'interface appropriée selon l'état de connexion
            updateAuthUI();
            
            // Gestion du mode sombre
            document.getElementById('theme-toggle').addEventListener('click', toggleDarkMode);
            
            // Gestion des boutons d'authentification
            document.getElementById('login-btn').addEventListener('click', () => showAuthModal('login'));
            document.getElementById('register-btn').addEventListener('click', () => showAuthModal('register'));
            document.getElementById('close-auth').addEventListener('click', hideAuthModal);
            
            // Navigation dans les tabs d'authentification
            document.querySelectorAll('.auth-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    switchAuthTab(tabId);
                });
            });
            
            // Switch entre connexion et inscription
            document.getElementById('switch-to-register').addEventListener('click', function(e) {
                e.preventDefault();
                switchAuthTab('register');
            });
            
            document.getElementById('switch-to-login').addEventListener('click', function(e) {
                e.preventDefault();
                switchAuthTab('login');
            });
            
            // Gestion du formulaire d'inscription
            document.getElementById('register-form').addEventListener('submit', handleRegister);
            
            // Gestion du formulaire de connexion
            document.getElementById('login-form').addEventListener('submit', handleLogin);
            
            // Gestion du formulaire de vérification
            document.getElementById('verify-form').addEventListener('submit', handleVerification);
            
            // Gestion du mot de passe oublié
            document.getElementById('forgot-password').addEventListener('click', function(e) {
                e.preventDefault();
                showToast('Un email de réinitialisation a été envoyé (simulation)', 'info');
            });
            
            // Gestion du renvoi de code
            document.getElementById('resend-code-btn').addEventListener('click', resendVerificationCode);
            
            // Gestion du changement d'email
            document.getElementById('change-email').addEventListener('click', function() {
                switchAuthTab('register');
            });
            
            // Gestion de la force du mot de passe
            document.getElementById('register-password').addEventListener('input', checkPasswordStrength);
            
            // Gestion des inputs de code de vérification
            document.querySelectorAll('.code-input').forEach(input => {
                input.addEventListener('input', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    
                    // Remplir automatiquement le prochain champ
                    if (this.value.length === 1 && index < 5) {
                        document.querySelector(`.code-input[data-index="${index + 1}"]`).focus();
                    }
                    
                    // Marquer le champ comme rempli
                    if (this.value.length === 1) {
                        this.classList.add('code-input-filled');
                    } else {
                        this.classList.remove('code-input-filled');
                    }
                });
                
                // Gestion de la suppression
                input.addEventListener('keydown', function(e) {
                    if (e.key === 'Backspace' && this.value.length === 0) {
                        const index = parseInt(this.getAttribute('data-index'));
                        if (index > 0) {
                            document.querySelector(`.code-input[data-index="${index - 1}"]`).focus();
                        }
                    }
                });
            });
            
            // Gestion de la publication
            document.getElementById('publish-btn').addEventListener('click', function() {
                if (!currentUser) {
                    showAuthModal('register');
                    showToast('Vous devez vous inscrire et vérifier votre compte pour publier une annonce', 'warning');
                    return;
                }
                
                if (!currentUser.verified) {
                    showToast('Votre compte doit être vérifié pour publier une annonce', 'warning');
                    return;
                }
                
                // Rediriger vers la section publication
                document.querySelectorAll('.nav-item').forEach(navItem => {
                    navItem.classList.remove('active');
                });
                
                document.querySelectorAll('.section').forEach(section => {
                    section.classList.remove('active');
                });
                
                document.getElementById('publication').classList.add('active');
            });
            
            // Gestion du slider de prix
            const rentSlider = document.querySelector('input[type="range"]');
            const rentValue = document.getElementById('rent-value');
            
            if (rentSlider && rentValue) {
                rentSlider.addEventListener('input', function() {
                    rentValue.textContent = new Intl.NumberFormat('fr-DZ').format(this.value) + ' DA';
                });
            }
            
            // Navigation entre sections
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function() {
                    // Retirer la classe active de tous les éléments de navigation
                    document.querySelectorAll('.nav-item').forEach(navItem => {
                        navItem.classList.remove('active');
                    });
                    
                    // Ajouter la classe active à l'élément cliqué
                    this.classList.add('active');
                    
                    // Masquer toutes les sections
                    document.querySelectorAll('.section').forEach(section => {
                        section.classList.remove('active');
                    });
                    
                    // Afficher la section correspondante
                    const sectionId = this.getAttribute('data-section');
                    document.getElementById(sectionId).classList.add('active');
                });
            });
            
            // Fermer le modal de détails
            document.getElementById('close-modal').addEventListener('click', function() {
                document.getElementById('listing-modal').classList.remove('active');
            });
            
            // Ouvrir les détails d'une annonce
            document.querySelectorAll('.listing-card').forEach(card => {
                card.addEventListener('click', function(e) {
                    // Ne pas ouvrir le modal si on clique sur le bouton favori
                    if (!e.target.closest('.favorite-icon')) {
                        const listingId = this.getAttribute('data-listing-id');
                        showListingDetails(listingId);
                    }
                });
            });
        });
        
        // Fonction pour afficher une notification
        function showToast(message, type = 'info', duration = 5000) {
            const toastContainer = document.querySelector('.toast-container');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            const icons = {
                success: 'fas fa-check-circle',
                error: 'fas fa-exclamation-circle',
                warning: 'fas fa-exclamation-triangle',
                info: 'fas fa-info-circle'
            };
            
            toast.innerHTML = `
                <i class="${icons[type]} toast-icon"></i>
                <div class="toast-content">
                    <div class="toast-title">${type.charAt(0).toUpperCase() + type.slice(1)}</div>
                    <div class="toast-message">${message}</div>
                </div>
                <button class="toast-close">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            toastContainer.appendChild(toast);
            
            // Afficher le toast
            setTimeout(() => {
                toast.classList.add('show');
            }, 10);
            
            // Fermer le toast au clic
            toast.querySelector('.toast-close').addEventListener('click', () => {
                hideToast(toast);
            });
            
            // Fermer automatiquement après la durée spécifiée
            if (duration) {
                setTimeout(() => {
                    hideToast(toast);
                }, duration);
            }
            
            return toast;
        }
        
        function hideToast(toast) {
            toast.classList.remove('show');
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.parentNode.removeChild(toast);
                }
            }, 300);
        }
        
        // Fonction pour basculer le mode sombre
        function toggleDarkMode() {
            const isDarkMode = document.body.classList.toggle('dark-mode');
            localStorage.setItem('darkMode', isDarkMode);
            
            const themeToggle = document.getElementById('theme-toggle');
            if (isDarkMode) {
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                themeToggle.setAttribute('aria-label', 'Activer le mode clair');
            } else {
                themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
                themeToggle.setAttribute('aria-label', 'Activer le mode sombre');
            }
            
            showToast(`Mode ${isDarkMode ? 'sombre' : 'clair'} activé`, 'info', 2000);
        }
        
        // Fonction pour afficher le modal d'authentification
        function showAuthModal(tab = 'login') {
            document.getElementById('auth-overlay').classList.add('active');
            switchAuthTab(tab);
        }
        
        // Fonction pour masquer le modal d'authentification
        function hideAuthModal() {
            document.getElementById('auth-overlay').classList.remove('active');
        }
        
        // Fonction pour changer d'onglet dans l'authentification
        function switchAuthTab(tab) {
            // Mettre à jour les tabs
            document.querySelectorAll('.auth-tab').forEach(tabElement => {
                tabElement.classList.remove('active');
            });
            
            document.querySelector(`.auth-tab[data-tab="${tab}"]`).classList.add('active');
            
            // Afficher le bon formulaire
            document.querySelectorAll('.auth-form').forEach(form => {
                form.classList.remove('active');
            });
            
            document.getElementById(`${tab}-form`).classList.add('active');
            
            // Si on passe à l'inscription, réinitialiser le formulaire
            if (tab === 'register') {
                document.getElementById('register-form').reset();
                document.getElementById('password-strength-bar').className = 'password-strength-bar';
            }
        }
        
        // Fonction pour gérer l'inscription
        function handleRegister(e) {
            e.preventDefault();
            
            // Récupérer les valeurs du formulaire
            const name = document.getElementById('register-name').value.trim();
            const email = document.getElementById('register-email').value.trim();
            const phone = document.getElementById('register-phone').value.trim();
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('register-confirm').value;
            const acceptTerms = document.getElementById('accept-terms').checked;
            
            // Validation
            if (!name || !email || !phone || !password || !confirmPassword) {
                showToast('Veuillez remplir tous les champs', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                showToast('Les mots de passe ne correspondent pas', 'error');
                return;
            }
            
            if (password.length < 8) {
                showToast('Le mot de passe doit contenir au moins 8 caractères', 'error');
                return;
            }
            
            if (!acceptTerms) {
                showToast('Vous devez accepter les conditions d\'utilisation', 'error');
                return;
            }
            
            // Vérifier si l'email est déjà utilisé
            const users = JSON.parse(localStorage.getItem('coloco_users')) || [];
            const existingUser = users.find(user => user.email === email);
            
            if (existingUser) {
                showToast('Cet email est déjà utilisé', 'error');
                return;
            }
            
            // Générer un code de vérification
            verificationCode = Math.floor(100000 + Math.random() * 900000).toString();
            
            // Stocker temporairement les données de l'utilisateur
            const tempUser = {
                id: Date.now().toString(),
                name,
                email,
                phone,
                password: btoa(password), // Chiffrement basique (en production, utiliser un vrai chiffrement)
                verified: false,
                createdAt: new Date().toISOString()
            };
            
            localStorage.setItem('coloco_temp_user', JSON.stringify(tempUser));
            localStorage.setItem('coloco_verification_code', verificationCode);
            
            // Afficher le formulaire de vérification
            switchAuthTab('verify');
            
            // Afficher l'email dans le formulaire de vérification
            document.getElementById('verification-email').textContent = email;
            
            // Démarrer le compte à rebours pour le renvoi de code
            startVerificationCountdown();
            
            // Simuler l'envoi d'email (en production, envoyer un vrai email)
            console.log(`Code de vérification pour ${email}: ${verificationCode}`);
            showToast(`Un code de vérification a été envoyé à ${email} (simulation)`, 'info');
        }
        
        // Fonction pour gérer la connexion
        function handleLogin(e) {
            e.preventDefault();
            
            const email = document.getElementById('login-email').value.trim();
            const password = document.getElementById('login-password').value;
            
            // Validation
            if (!email || !password) {
                showToast('Veuillez remplir tous les champs', 'error');
                return;
            }
            
            // Vérifier les informations de connexion
            const users = JSON.parse(localStorage.getItem('coloco_users')) || [];
            const user = users.find(u => u.email === email && atob(u.password) === password);
            
            if (!user) {
                showToast('Email ou mot de passe incorrect', 'error');
                return;
            }
            
            if (!user.verified) {
                showToast('Veuillez vérifier votre compte avant de vous connecter', 'warning');
                
                // Afficher le formulaire de vérification
                localStorage.setItem('coloco_temp_user', JSON.stringify(user));
                verificationCode = localStorage.getItem('coloco_verification_code') || Math.floor(100000 + Math.random() * 900000).toString();
                
                switchAuthTab('verify');
                document.getElementById('verification-email').textContent = email;
                startVerificationCountdown();
                return;
            }
            
            // Connexion réussie
            currentUser = user;
            localStorage.setItem('coloco_current_user', JSON.stringify(user));
            
            // Mettre à jour l'interface
            updateAuthUI();
            
            // Fermer le modal
            hideAuthModal();
            
            showToast(`Bienvenue ${user.name} !`, 'success');
        }
        
        // Fonction pour gérer la vérification
        function handleVerification(e) {
            e.preventDefault();
            
            // Récupérer le code saisi
            const codeInputs = document.querySelectorAll('.code-input');
            let enteredCode = '';
            codeInputs.forEach(input => {
                enteredCode += input.value;
            });
            
            // Récupérer le code stocké
            const storedCode = localStorage.getItem('coloco_verification_code');
            
            // Validation
            if (enteredCode.length !== 6) {
                showToast('Veuillez entrer le code complet à 6 chiffres', 'error');
                return;
            }
            
            if (enteredCode !== storedCode) {
                showToast('Code incorrect. Veuillez réessayer', 'error');
                return;
            }
            
            // Récupérer l'utilisateur temporaire
            const tempUser = JSON.parse(localStorage.getItem('coloco_temp_user'));
            
            if (!tempUser) {
                showToast('Session expirée. Veuillez vous réinscrire', 'error');
                switchAuthTab('register');
                return;
            }
            
            // Marquer l'utilisateur comme vérifié
            tempUser.verified = true;
            
            // Sauvegarder l'utilisateur dans la liste des utilisateurs
            const users = JSON.parse(localStorage.getItem('coloco_users')) || [];
            
            // Vérifier si l'utilisateur existe déjà
            const existingUserIndex = users.findIndex(user => user.email === tempUser.email);
            
            if (existingUserIndex !== -1) {
                users[existingUserIndex] = tempUser;
            } else {
                users.push(tempUser);
            }
            
            localStorage.setItem('coloco_users', JSON.stringify(users));
            
            // Définir comme utilisateur actuel
            currentUser = tempUser;
            localStorage.setItem('coloco_current_user', JSON.stringify(tempUser));
            
            // Nettoyer les données temporaires
            localStorage.removeItem('coloco_temp_user');
            localStorage.removeItem('coloco_verification_code');
            
            // Mettre à jour l'interface
            updateAuthUI();
            
            // Fermer le modal
            hideAuthModal();
            
            // Arrêter le compte à rebours
            clearInterval(verificationTimer);
            
            showToast('Votre compte a été vérifié avec succès !', 'success');
        }
        
        // Fonction pour renvoyer le code de vérification
        function resendVerificationCode() {
            const resendBtn = document.getElementById('resend-code-btn');
            
            if (resendBtn.disabled) {
                return;
            }
            
            // Générer un nouveau code
            verificationCode = Math.floor(100000 + Math.random() * 900000).toString();
            localStorage.setItem('coloco_verification_code', verificationCode);
            
            // Redémarrer le compte à rebours
            startVerificationCountdown();
            
            // Simuler l'envoi d'email
            const tempUser = JSON.parse(localStorage.getItem('coloco_temp_user'));
            if (tempUser) {
                console.log(`Nouveau code de vérification pour ${tempUser.email}: ${verificationCode}`);
                showToast(`Un nouveau code a été envoyé à ${tempUser.email}`, 'info');
            }
        }
        
        // Fonction pour démarrer le compte à rebours de vérification
        function startVerificationCountdown() {
            const resendBtn = document.getElementById('resend-code-btn');
            const countdownElement = document.getElementById('countdown');
            
            countdownSeconds = 60;
            resendBtn.disabled = true;
            
            verificationTimer = setInterval(() => {
                countdownSeconds--;
                
                if (countdownSeconds <= 0) {
                    clearInterval(verificationTimer);
                    resendBtn.disabled = false;
                    countdownElement.textContent = '';
                } else {
                    countdownElement.textContent = `(${countdownSeconds}s)`;
                }
            }, 1000);
        }
        
        // Fonction pour vérifier la force du mot de passe
        function checkPasswordStrength() {
            const password = document.getElementById('register-password').value;
            const strengthBar = document.getElementById('password-strength-bar');
            
            let strength = 0;
            
            // Longueur minimale
            if (password.length >= 8) strength++;
            
            // Contient des lettres minuscules
            if (/[a-z]/.test(password)) strength++;
            
            // Contient des lettres majuscules
            if (/[A-Z]/.test(password)) strength++;
            
            // Contient des chiffres
            if (/\d/.test(password)) strength++;
            
            // Contient des caractères spéciaux
            if (/[^A-Za-z0-9]/.test(password)) strength++;
            
            // Mettre à jour l'affichage
            strengthBar.className = 'password-strength-bar';
            
            if (strength <= 2) {
                strengthBar.classList.add('password-strength-weak');
            } else if (strength <= 4) {
                strengthBar.classList.add('password-strength-medium');
            } else {
                strengthBar.classList.add('password-strength-strong');
            }
        }
        
        // Fonction pour mettre à jour l'interface selon l'état d'authentification
        function updateAuthUI() {
            const authButtons = document.getElementById('auth-buttons');
            const userMenu = document.getElementById('user-menu');
            const userAvatar = document.querySelector('#user-menu .user-avatar span');
            
            if (currentUser) {
                // Utilisateur connecté
                authButtons.style.display = 'none';
                userMenu.style.display = 'block';
                
                // Mettre à jour l'avatar avec les initiales
                const initials = currentUser.name
                    .split(' ')
                    .map(part => part[0])
                    .join('')
                    .toUpperCase()
                    .substring(0, 2);
                
                userAvatar.textContent = initials;
                
                // Mettre à jour le bouton de publication
                const publishBtn = document.getElementById('publish-ad');
                const publishFloatingBtn = document.getElementById('publish-btn');
                
                if (currentUser.verified) {
                    if (publishBtn) {
                        publishBtn.disabled = false;
                        publishBtn.textContent = 'Publier l\'annonce';
                        publishBtn.classList.remove('btn-secondary');
                        publishBtn.classList.add('btn-success');
                    }
                    
                    if (publishFloatingBtn) {
                        publishFloatingBtn.title = 'Publier une annonce';
                    }
                } else {
                    if (publishBtn) {
                        publishBtn.disabled = true;
                        publishBtn.textContent = 'Publier l\'annonce (Compte non vérifié)';
                        publishBtn.classList.remove('btn-success');
                        publishBtn.classList.add('btn-secondary');
                    }
                    
                    if (publishFloatingBtn) {
                        publishFloatingBtn.title = 'Vérifiez votre compte pour publier';
                    }
                }
            } else {
                // Utilisateur non connecté
                authButtons.style.display = 'flex';
                userMenu.style.display = 'none';
                
                // Désactiver le bouton de publication
                const publishBtn = document.getElementById('publish-ad');
                const publishFloatingBtn = document.getElementById('publish-btn');
                
                if (publishBtn) {
                    publishBtn.disabled = true;
                    publishBtn.textContent = 'Publier l\'annonce (Connectez-vous)';
                    publishBtn.classList.remove('btn-success');
                    publishBtn.classList.add('btn-secondary');
                }
                
                if (publishFloatingBtn) {
                    publishFloatingBtn.title = 'Connectez-vous pour publier';
                }
            }
        }
        
        // Fonction pour afficher les détails d'une annonce
        function showListingDetails(listingId) {
            document.getElementById('listing-modal').classList.add('active');
        }
        
        // Fonction pour se déconnecter
        function logout() {
            if (confirm('Êtes-vous sûr de vouloir vous déconnecter ?')) {
                currentUser = null;
                localStorage.removeItem('coloco_current_user');
                updateAuthUI();
                showToast('Vous avez été déconnecté', 'info');
            }
        }
        
        // Attacher la fonction de déconnexion à l'avatar
        document.addEventListener('click', function(e) {
            if (e.target.closest('#user-profile-btn')) {
                if (currentUser) {
                    if (confirm('Voulez-vous vous déconnecter ?')) {
                        logout();
                    }
                }
            }
        });
        
        // Initialiser quelques utilisateurs de test (à enlever en production)
        function initTestUsers() {
            const testUsers = [
                {
                    id: '1',
                    name: 'Yassine A.',
                    email: 'yassine@test.com',
                    phone: '+213 123 45 67 89',
                    password: btoa('Test1234'),
                    verified: true,
                    createdAt: new Date().toISOString()
                },
                {
                    id: '2',
                    name: 'Karim M.',
                    email: 'karim@test.com',
                    phone: '+213 987 65 43 21',
                    password: btoa('Test1234'),
                    verified: true,
                    createdAt: new Date().toISOString()
                }
            ];
            
            if (!localStorage.getItem('coloco_users')) {
                localStorage.setItem('coloco_users', JSON.stringify(testUsers));
            }
        }
        
        // Initialiser les utilisateurs de test
        initTestUsers();
    </script>
</body>
</html>
